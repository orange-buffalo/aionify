# Quarkus configuration
quarkus.http.root-path=/

# Serve index.html for SPA routing
quarkus.http.enable-compression=true

# Container image configuration
quarkus.container-image.registry=ghcr.io
quarkus.container-image.group=orange-buffalo
quarkus.container-image.name=aionify

# Native build configuration
quarkus.native.container-build=true

# Database configuration
# DevServices will automatically start PostgreSQL via Testcontainers in dev/test mode
# In production, set AIONIFY_DB_URL, AIONIFY_DB_USERNAME, AIONIFY_DB_PASSWORD environment variables
quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.jdbc.url=${AIONIFY_DB_URL}
%prod.quarkus.datasource.username=${AIONIFY_DB_USERNAME}
%prod.quarkus.datasource.password=${AIONIFY_DB_PASSWORD}

# Flyway configuration
quarkus.flyway.migrate-at-start=true

# JWT Configuration
# SmallRye JWT will auto-generate signing keys at startup
smallrye.jwt.new-token.signature-algorithm=RS256
mp.jwt.verify.issuer=aionify
aionify.jwt.issuer=aionify
aionify.jwt.expiration-minutes=1440

# Security - allow public access to login, deny other protected endpoints
quarkus.http.auth.permission.public.paths=/api/auth/login
quarkus.http.auth.permission.public.policy=permit
quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated
